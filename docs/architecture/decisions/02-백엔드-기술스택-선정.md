# 백엔드 기술 스택 선정

Date: 2025-01-24

## 상태

적용 중

## 맥락

프론트엔드와 백엔드를 분리한 아키텍처 내에서, 백엔드는 다음과 같은 역할을 수행해야 했습니다:

- **REST API**서버로서 클라이언트와의 통신 처리
- **OAuth2** 기반 인증/인가 처리
- 데이터베이스와의 안정적인 연동
- 향후 서비스 확장을 고려한 유연한 설계

위 조건에 부합하는, **Spring boot를 선택**했습니다. 

<br/>

---

<br/>

### 1. Spring Boot를 선택한 이유

#### ① JPA + Hibernate 기반 ORM 지원

- 추상화된 방식으로 다양한 DB연동이 가능하며,
- PSA(Portable Service Abstraction)를 통해 이식성과 유지보수 효율이 높습니다.
  - 로컬환경 : h2 사용
  - 테스트 및 배포환경 : mySQL 또는 mariaDB 등
- 향후 Redis 등 캐시 서버 도입 시에도 유연한 확장이 가능합니다.

---

#### ② Spring Security + OAuth2 지원

- 인증/인가를 필터 기반으로 세분화하여 처리할 수 있으며,
- 구글 로그인 등 OAuth2 연동이 구조적으로 안정적입니다.

---

#### ③ 테스트 자동화 환경 지원

- JUnit5와 Mockito를 기반으로, 단위 테스트 및 통합 테스트 구성이 용이합니다.

<br/>

---

<br/>

### 2. 다른 대안 : Next.js 단독 백엔드

- Next.js에서도 API 라우팅 및 OAuth2 기능은 지원되지만,  
  인증 흐름 복잡도와 보안/확장성 측면에서 **Spring 기반 서버보다 불리하다고 판단**하였습니다.

<br/>
<br/>

## 결정

- **Spring Boot** 3.4.0
- **OpenJDK Java** 21

<br/>
<br/>

## 결과

### ① 데이터베이스와의 유연한 연동

- JPA + Hibernate 조합을 통해 환경별 DB 설정을 분리할 수 있어 유지보수가 수월해졌습니다.

  - 개발 환경: H2 Database
  - 운영 환경: MariaDB

- 다만, ORM 기반 설계에는 다음과 같은 학습 곡선이 존재합니다:

  - 연관관계 설정, 양방향 매핑 시 `set()` 메서드 호출 순서 주의 필요
  - N+1 문제 방지를 위한 Fetch 전략 선택이 중요
  - 지연 로딩에 따른 예기치 않은 LazyInitializationException 발생 가능성 존재

- 이를 보완하기 위해:
  - 복잡한 쿼리는 필요에 따라 **QueryDSL** 또는 **JSQL**을 사용
  - **단방향 ManyToOne 중심 설계**를 우선 채택하여 성능과 단순화를 함께 고려하였습니다

<br/>

---

<br/>

### ② 인증/인가 구조의 안정성 확보

- Spring Security는 필터 기반 구조로 동작하며, 각 요청에 대해 세분화된 인증 처리가 가능합니다.
- 미리 정의된 정책과 필터 체인을 활용해 XSS, 세션 탈취, CSRF 등 다양한 보안 위협에 대비할 수 있습니다.
- 다만, 필터 흐름 및 인증 흐름을 정확히 이해하기 위해 학습이 필요했습니다.
