# 시스템 아키텍처

Date: 2025-02-13

## 상태

적용 중 (운영 초기 상태)

## 맥락

<pre>Docker-Compose 활용한 EC2 배포</pre>

서비스 운영 초기에는간편한 배포 관리를 위해 AWS EC2 단일 인스턴스에서 실행되도록 구성했다.
이를 위해 Docker-Compose를 활용하여 `Frontend(Next.js)`, `Backend(Spring Boot)`, `DB(MariaDB)`를 하나의 EC2 내에서 컨테이너로 구동하고 있다.

## 결정

- 배포 구조
  | 부분 | 기능 |
  | :-------------------------------: | :--------------------------------------------: |
  | EC2 인스턴스 | Elastic IP addresses를 할당받아 도메인 설정 |
  | Nginx | Reverse Proxy 역할을 수행하며, 도커 바깥에서 실행됨 |
  | Docker-Compose | 프론트엔드, 백엔드, DB를 하나의 인스턴스 내 독립적 환경에서 실행 |
  | MariaDB | Docker Hub에서 공식 이미지로 구동 + EC2 내부 디렉터리의 볼륨에 데이터 저장 |

!["System Architecture"](./04-시스템-아키텍처.jpg)

## 결과

<pre>
향후 확장을 고려하여 인프라를 개선의 필요성을 느꼈다.
</pre>

- EC2 단일 인스턴스 운영의 문제

  - 부분 장애 발생 시 전체 서비스 중단 가능성
  - Docker 컨테이너 개별 관리 어려움

- DB의 확장성 및 안정성 문제

  - 현재 DB의 복구 및 백업 기능 부재
  - EC2 서버 장애 시, 데이터 손실 가능성

- Server-Side Rendering 필요성 검토

  - 실제 SSR이 필요한 페이지가 많지 않음

<pre>
점진적으로 아래와 같은 개선 방향을 고려하고 있다.
</pre>

| 단계  |             개선 사항             |                   기대 효과                    |
| :---: | :-------------------------------: | :--------------------------------------------: |
| 1단계 |      DB 분리 : aws RDS + EBS      |       데이터 안정성 향상, 백업 기능 추가       |
| 2단계 | 프론트엔드 분리 : S3 + CloudFront | 서버 부하 감소, 확장 가능한 백엔드 구조로 변경 |
| 3단계 |      ALB 추가 + Auto Scaling      |             트래픽 분산, 성능 향상             |
| 4단계 | ECS 또는 EKS로 컨테이너 관리 전환 |               자동 스케일링 가능               |
